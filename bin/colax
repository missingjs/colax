#!/bin/bash

self_dir=$(cd $(dirname $0) && pwd)

usage()
{
    local cmd=$(basename $0)
    cat << EOF
usage: $cmd [command] [options]

Commands:

    server   Server operations.

    worker   Worker management.
EOF

    exit 1
}

sub_command=$1

[ -z $sub_command ] && usage

# initiate global environments
COLAX_HOME=$(realpath $self_dir/..)

shift

case $sub_command in
    worker)
        language=$1
        shift
        $COLAX_HOME/worker/$language/bin/worker "$@"
        ;;
    server)
        $COLAX_HOME/server/bin/server "$@"
        ;;
    *)
        usage
        ;;
esac
